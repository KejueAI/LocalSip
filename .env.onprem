# =============================================================================
# On-Premises Deployment Configuration
# =============================================================================
# Use with: docker compose --env-file .env.onprem up -d
#
# Assumptions:
# - Server has a static public IP (or sits behind an SBC with a known IP)
# - No cloud load balancers â€” SIP traffic goes directly to FreeSWITCH
# - Database and Redis run as containers or on local/network hosts
# - Patched images are pre-built and available in a private registry
# =============================================================================

# --- External SIP/RTP IP ---
# Your server's public-facing IP (or SBC IP if behind a session border controller)
FS_EXTERNAL_SIP_IP=203.0.113.10
FS_EXTERNAL_RTP_IP=203.0.113.10

# --- Database ---
POSTGRES_USER=somleng
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DATABASE_HOST=db

# --- Redis ---
REDIS_URL=redis://redis:6379/0
REDIS_URL_SWITCH=redis://redis:6379/1

# --- Somleng API ---
RAILS_ENV=production
SOMLENG_API_HOST=api.yourdomain.com
SOMLENG_API_PORT=3000
DASHBOARD_URL_HOST=https://dashboard.yourdomain.com
DB_POOL=30

# --- Switch / FreeSWITCH ---
SWITCH_HOST=http://somleng-switch:8080
FS_ESL_HOST=freeswitch
FS_ESL_PORT=8021
FS_ESL_PASSWORD=CHANGE_ME_ESL_PASSWORD
FS_DATABASE_HOST=db
SIP_GATEWAY_DIR=/sip_gateways
SIP_PORT=5060

# --- Container Images ---
# Override when using a private registry (ECR, Harbor, etc.)
# SOMLENG_IMAGE=registry.yourdomain.com/localsip/somleng:latest
# SWITCH_IMAGE=registry.yourdomain.com/localsip/switch:latest
# FREESWITCH_IMAGE=registry.yourdomain.com/localsip/freeswitch:latest
# RATING_ENGINE_IMAGE=registry.yourdomain.com/localsip/rating-engine:latest

# --- Rating Engine ---
RATING_ENGINE_HOST=http://rating-engine-api:2080
RATING_ENGINE_USERNAME=cgrates
RATING_ENGINE_PASSWORD=CHANGE_ME_RATING_PASSWORD
STUB_RATING_ENGINE=false
STORDB_DBNAME=cgrates

# --- Rails Secret ---
# Generate with: openssl rand -hex 64
SECRET_KEY_BASE=CHANGE_ME_GENERATE_WITH_OPENSSL

# --- AnyCable ---
ANYCABLE_SECRET=CHANGE_ME_ANYCABLE_SECRET
ANYCABLE_BROADCAST_ADAPTER=redisx
