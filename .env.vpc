# =============================================================================
# VPC / Private Cloud Deployment Configuration
# =============================================================================
# Use with: docker compose --env-file .env.vpc up -d
#
# Assumptions:
# - Running inside a VPC (AWS, GCP, Azure, or private cloud)
# - SIP peers are either in the same VPC or reach you via a NAT/EIP
# - Database may be a managed service (RDS, Cloud SQL) instead of a container
# - Redis may be a managed service (ElastiCache, Memorystore)
# =============================================================================

# --- External SIP/RTP IP ---
# If SIP peers are in the same VPC, use the instance's private IP.
# If SIP peers are external, use the NAT instance EIP or public IP.
FS_EXTERNAL_SIP_IP=10.10.0.50
FS_EXTERNAL_RTP_IP=10.10.0.50

# --- Database ---
# Point to managed database (RDS, etc.) or container
POSTGRES_USER=somleng
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DATABASE_HOST=somleng-db.cluster-xxxx.ap-southeast-1.rds.amazonaws.com

# --- Redis ---
# Point to managed Redis (ElastiCache, etc.) or container
REDIS_HOST=somleng-redis.xxxx.cache.amazonaws.com
REDIS_URL=redis://somleng-redis.xxxx.cache.amazonaws.com:6379/0
REDIS_URL_SWITCH=redis://somleng-redis.xxxx.cache.amazonaws.com:6379/1

# --- Somleng API ---
RAILS_ENV=production
SOMLENG_API_HOST=api.somleng.internal
SOMLENG_API_PORT=3000
DASHBOARD_URL_HOST=https://dashboard.yourdomain.com
DB_POOL=30

# --- Switch / FreeSWITCH ---
SWITCH_HOST=http://somleng-switch:8080
FS_ESL_HOST=freeswitch
FS_ESL_PORT=8021
FS_ESL_PASSWORD=CHANGE_ME_ESL_PASSWORD
FS_DATABASE_HOST=somleng-db.cluster-xxxx.ap-southeast-1.rds.amazonaws.com
SIP_GATEWAY_DIR=/sip_gateways
SIP_PORT=5060

# --- Container Images ---
# Override when using a private registry (ECR, Harbor, etc.)
# SOMLENG_IMAGE=123456789.dkr.ecr.ap-southeast-1.amazonaws.com/somleng:latest
# SWITCH_IMAGE=123456789.dkr.ecr.ap-southeast-1.amazonaws.com/switch:latest
# FREESWITCH_IMAGE=123456789.dkr.ecr.ap-southeast-1.amazonaws.com/freeswitch:latest
# RATING_ENGINE_IMAGE=123456789.dkr.ecr.ap-southeast-1.amazonaws.com/rating-engine:latest

# --- Rating Engine ---
RATING_ENGINE_HOST=http://rating-engine-api:2080
RATING_ENGINE_USERNAME=cgrates
RATING_ENGINE_PASSWORD=CHANGE_ME_RATING_PASSWORD
STUB_RATING_ENGINE=false
STORDB_DBNAME=cgrates

# --- Rails Secret ---
# Generate with: openssl rand -hex 64
SECRET_KEY_BASE=CHANGE_ME_GENERATE_WITH_OPENSSL

# --- AnyCable ---
ANYCABLE_SECRET=CHANGE_ME_ANYCABLE_SECRET
ANYCABLE_BROADCAST_ADAPTER=redisx
